{% load static %}
<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block page_title %}Foodie{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{% static 'shared/css/output.css' %}">
    {% block page_css %}{% endblock %}
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-gray-50 min-h-screen flex">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="flex items-center gap-3 p-4 border-b border-gray-200">
            <button class="text-gray-500 hover:text-gray-900 text-xl" id="toggleBtn">â˜°</button>
            <h2 class="font-bold text-lg text-gray-900 sidebar-text">Foodie</h2>
        </div>

        <nav class="flex-1 py-4">
            <ul class="space-y-1">
                <li>
                    <a href="{% url 'usersideapp:home' %}"
                        class="sidebar-item {% if active_nav == 'home' %}active{% endif %}" id="menu-home" title="é¦–é ">
                        <span class="text-xl">ğŸ </span>
                        <span class="sidebar-text">é¦–é </span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:search' %}"
                        class="sidebar-item {% if active_nav == 'search' %}active{% endif %}" id="menu-search"
                        title="æœå°‹é¤å»³">
                        <span class="text-xl">ğŸœ</span>
                        <span class="sidebar-text">æœå°‹é¤å»³</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:random' %}"
                        class="sidebar-item {% if active_nav == 'random' %}active{% endif %}" id="menu-random"
                        title="éš¨æ©Ÿæ¨è–¦">
                        <span class="text-xl">ğŸ²</span>
                        <span class="sidebar-text">éš¨æ©Ÿæ¨è–¦</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:today' %}"
                        class="sidebar-item {% if active_nav == 'today' %}active{% endif %}" id="menu-today"
                        title="ä»Šæ—¥é£²é£Ÿ">
                        <span class="text-xl">ğŸ“</span>
                        <span class="sidebar-text">ä»Šæ—¥é£²é£Ÿ</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:record' %}"
                        class="sidebar-item {% if active_nav == 'record' %}active{% endif %}" id="menu-record"
                        title="é£²é£Ÿç´€éŒ„">
                        <span class="text-xl">ğŸ“…</span>
                        <span class="sidebar-text">é£²é£Ÿç´€éŒ„</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:notify' %}"
                        class="sidebar-item {% if active_nav == 'notify' %}active{% endif %}" id="menu-notify"
                        title="æ¨æ’­é€šçŸ¥">
                        <span class="text-xl">ğŸ””</span>
                        <span class="sidebar-text">æ¨æ’­é€šçŸ¥</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:health' %}"
                        class="sidebar-item {% if active_nav == 'health' %}active{% endif %}" id="menu-health"
                        title="å¥åº·å»ºè­°">
                        <span class="text-xl">ğŸ¥—</span>
                        <span class="sidebar-text">å¥åº·å»ºè­°</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:interactions' %}"
                        class="sidebar-item {% if active_nav == 'interactions' %}active{% endif %}"
                        id="menu-interactions" title="æˆ‘çš„äº’å‹•">
                        <span class="text-xl">ğŸ’¬</span>
                        <span class="sidebar-text">æˆ‘çš„äº’å‹•</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'usersideapp:settings' %}"
                        class="sidebar-item {% if active_nav == 'settings' %}active{% endif %}" id="menu-setting"
                        title="è¨­å®š">
                        <span class="text-xl">âš™ï¸</span>
                        <span class="sidebar-text">è¨­å®š</span>
                    </a>
                </li>
                <li class="mt-4 pt-4 border-t border-gray-200">
                    <form method="post" action="{% url 'usersideapp:logout' %}" >
                        {% csrf_token %}
                        <button type="submit"
                            class="sidebar-item w-full text-left text-red-500 hover:text-red-600 hover:bg-red-50"
                            id="menu-logout" title="ç™»å‡º">
                            <span class="text-xl">ğŸšª</span>
                            <span class="sidebar-text">ç™»å‡º</span>
                        </button>
                    </form>

                </li>
            </ul>
        </nav>

        {% if current_user %}
        <div class="p-4 border-t border-gray-200">
            <div class="flex items-center gap-3">
                <div
                    class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 flex items-center justify-center text-white font-semibold">
                    {{ current_user.username|first|upper }}
                </div>
                <div class="sidebar-text overflow-hidden">
                    <p class="font-medium text-gray-900 truncate">
                        {{ current_user.full_name|default:current_user.username }}</p>
                    <p class="text-xs text-gray-500 truncate">{{ current_user.email }}</p>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Main content -->
    <div class="flex-1 ml-18 transition-all duration-300" id="main-content">
        <div class="p-6">
            {% include 'shared/components/alerts.html' %}
            {% block content %}{% endblock %}
        </div>
    </div>

    <!-- <form id="logout-form" method="post" action="{% url 'usersideapp:logout' %}" style="display:none;">
        {% csrf_token %}
    </form> -->

    <!-- <script>
        window.appRoutes = {
            home: "{% url 'usersideapp:home' %}",
            search: "{% url 'usersideapp:search' %}",
            random: "{% url 'usersideapp:random' %}",
            today: "{% url 'usersideapp:today' %}",
            record: "{% url 'usersideapp:record' %}",
            notify: "{% url 'usersideapp:notify' %}",
            health: "{% url 'usersideapp:health' %}",
            interactions: "{% url 'usersideapp:interactions' %}",
            settings: "{% url 'usersideapp:settings' %}",
            login: "{% url 'usersideapp:login' %}"
        };
    </script>
-->
    <script src="{% static 'usersideapp/js/User_homepage.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>