{% load static %}
<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block page_title %}Foodie Â· å•†å®¶ç«¯{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{% static 'shared/css/output.css' %}">
    {% block page_css %}{% endblock %}
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-gray-50 min-h-screen flex">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="flex items-center gap-3 p-4 border-b border-gray-200">
            <button class="text-gray-500 hover:text-gray-900 text-xl" id="toggleBtn">â˜°</button>
            <h2 class="font-bold text-lg text-gray-900 sidebar-text">Foodie å•†å®¶ç«¯</h2>
        </div>

        <nav class="flex-1 py-4">
            <ul class="space-y-1">
                <li>
                    <a href="{% url 'merchantsideapp:dashboard' %}"
                        class="sidebar-item {% if active_nav == 'dashboard' %}active{% endif %}" id="menu-dashboard"
                        title="ä¸»é ç¸½è¦½">
                        <span class="text-xl">ğŸ </span>
                        <span class="sidebar-text">ä¸»é ç¸½è¦½</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'merchantsideapp:add_meal' %}"
                        class="sidebar-item {% if active_nav == 'add' %}active{% endif %}" id="menu-add" title="æ–°å¢é¤é»">
                        <span class="text-xl">â•</span>
                        <span class="sidebar-text">æ–°å¢é¤é»</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'merchantsideapp:manage_meals' %}"
                        class="sidebar-item {% if active_nav == 'manage' %}active{% endif %}" id="menu-manage"
                        title="ç®¡ç†é¤é»">
                        <span class="text-xl">ğŸ“‹</span>
                        <span class="sidebar-text">ç®¡ç†é¤é»</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'merchantsideapp:settings' %}"
                        class="sidebar-item {% if active_nav == 'settings' %}active{% endif %}" id="menu-settings"
                        title="è¨­å®š">
                        <span class="text-xl">âš™ï¸</span>
                        <span class="sidebar-text">è¨­å®š</span>
                    </a>
                </li>
                <li class="mt-4 pt-4 border-t border-gray-200">
                    <form action="{% url 'merchantsideapp:logout' %}" method="post">
                        {% csrf_token %}
                        <button type="submit"
                            class="sidebar-item w-full text-left text-red-500 hover:text-red-600 hover:bg-red-50"
                            id="menu-logout" title="ç™»å‡º">
                            <span class="text-xl">ğŸšª</span>
                            <span class="sidebar-text">ç™»å‡º</span>
                        </button>
                    </form>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="flex-1 ml-18 transition-all duration-300 flex flex-col min-h-screen" id="main-content">
        <div class="p-6 flex-1 flex flex-col">
            {% include 'shared/components/alerts.html' %}
            <div class="flex-1">
                {% block content %}{% endblock %}
            </div>
            <footer class="mt-12 border-t border-gray-200 pt-6 text-sm text-gray-500 space-y-3">
                <div class="space-y-1">
                    <p class="font-semibold text-gray-700">{{ company_name|default:"Foodie" }}</p>
                    {% if company_registration %}
                    <p class="text-xs text-gray-400">{{ company_registration }}</p>
                    {% endif %}
                </div>
                <div class="space-y-1">
                    {% if company_address %}<p>ğŸ“ {{ company_address }}</p>{% endif %}
                    {% if company_phone %}<p>â˜ {{ company_phone }}</p>{% endif %}
                    {% if support_email %}
                    <p><a href="mailto:{{ support_email }}" class="text-primary-600 hover:underline">
                        âœ‰ {{ support_email }}</a></p>
                    {% endif %}
                    {% if company_site %}
                    <p><a href="{{ company_site }}" target="_blank" rel="noopener"
                            class="text-primary-600 hover:underline">ğŸŒ å®˜æ–¹ç¶²ç«™</a></p>
                    {% endif %}
                </div>
                <p class="text-xs text-gray-400">Â© {% now "Y" %} 
                    {{ company_legal_name|default:company_name|default:"Foodie" }} Â· All rights reserved.</p>
            </footer>
        </div>
    </div>

    <!-- <form id="logout-form" method="post" action="{% url 'merchantsideapp:logout' %}" style="display:none;">
        {% csrf_token %}
    </form> -->

    <!--    <script>-->
    <!--        window.merchantRoutes = {-->
    <!--            dashboard: "{% url 'merchantsideapp:dashboard' %}",-->
    <!--            addMeal: "{% url 'merchantsideapp:add_meal' %}",-->
    <!--            manageMeals: "{% url 'merchantsideapp:manage_meals' %}",-->
    <!--            settings: "{% url 'merchantsideapp:settings' %}",-->
    <!--            login: "{% url 'merchantsideapp:login' %}",-->
    <!--            logout: "{% url 'merchantsideapp:logout' %}"-->
    <!--        };-->
    <!--    </script>-->
    <script src="{% static 'merchantsideapp/js/merchant_homepage.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>